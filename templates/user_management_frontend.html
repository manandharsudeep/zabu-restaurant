<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management - Zabu Restaurant</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .main-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
            margin: 0;
        }
        
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .stat-icon {
            font-size: 36px;
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 14px;
        }
        
        .search-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #e9ecef;
        }
        
        .search-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 12px 20px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
            outline: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 600;
            transition: all 0.3s ease;
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn-outline-secondary {
            border: 2px solid #6c757d;
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #6c757d;
            background: white;
        }
        
        .btn-outline-secondary:hover {
            background: #6c757d;
            color: white;
            border-color: #6c757d;
        }
        
        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            background: white;
            color: #6c757d;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .filter-btn:hover, .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .users-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #e9ecef;
        }
        
        .table {
            margin: 0;
        }
        
        .table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #e9ecef;
            padding: 15px;
        }
        
        .table td {
            padding: 15px;
            vertical-align: middle;
            border-bottom: 1px solid #e9ecef;
        }
        
        .table tbody tr:hover {
            background: #f8f9fa;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 16px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-details {
            flex: 1;
        }
        
        .user-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 2px;
        }
        
        .user-email {
            color: #6c757d;
            font-size: 14px;
        }
        
        .badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .badge-success {
            background: #28a745;
            color: white;
        }
        
        .badge-warning {
            background: #ffc107;
            color: #212529;
        }
        
        .badge-danger {
            background: #dc3545;
            color: white;
        }
        
        .badge-info {
            background: #17a2b8;
            color: white;
        }
        
        .badge-secondary {
            background: #6c757d;
            color: white;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 6px;
            border: 1px solid;
            background: white;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-sm:hover {
            transform: translateY(-1px);
        }
        
        .btn-sm.btn-primary {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .btn-sm.btn-warning {
            background: #ffc107;
            color: #212529;
            border-color: #ffc107;
        }
        
        .btn-sm.btn-danger {
            background: #dc3545;
            color: white;
            border-color: #dc3545;
        }
        
        .btn-sm.btn-info {
            background: #17a2b8;
            color: white;
            border-color: #17a2b8;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 30px;
        }
        
        .page-link {
            padding: 10px 15px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            color: #6c757d;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .page-link:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .page-link.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6c757d;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
        }
        
        .form-control {
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 12px 15px;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
            outline: none;
        }
        
        .form-select {
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 12px 15px;
            transition: all 0.3s ease;
        }
        
        .form-select:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
            outline: none;
        }
        
        .form-check {
            margin-bottom: 10px;
        }
        
        .form-check-input {
            margin-right: 8px;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .stats-row {
                grid-template-columns: 1fr;
            }
            
            .search-bar {
                flex-direction: column;
            }
            
            .filter-buttons {
                justify-content: center;
            }
            
            .users-table {
                overflow-x: auto;
            }
            
            .action-buttons {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-card">
            <!-- Header -->
            <div class="header">
                <h1><i class="fas fa-users me-3"></i>User Management</h1>
                <p>Manage all users, their roles, and permissions in the system</p>
            </div>
            
            <!-- Statistics -->
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-number">21</div>
                    <div class="stat-label">Total Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="stat-number">9</div>
                    <div class="stat-label">Staff Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="stat-number">3</div>
                    <div class="stat-label">New This Week</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-user-clock"></i>
                    </div>
                    <div class="stat-number">18</div>
                    <div class="stat-label">Active Now</div>
                </div>
            </div>
            
            <!-- Search and Filters -->
            <div class="search-section">
                <div class="search-bar">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search users by name, email, or username...">
                    <button class="btn btn-primary" onclick="searchUsers()">
                        <i class="fas fa-search me-2"></i>Search
                    </button>
                </div>
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterUsers('all')">All Users</button>
                    <button class="filter-btn" onclick="filterUsers('active')">Active</button>
                    <button class="filter-btn" onclick="filterUsers('inactive')">Inactive</button>
                    <button class="filter-btn" onclick="filterUsers('staff')">Staff</button>
                    <button class="filter-btn" onclick="filterUsers('admin')">Admin</button>
                </div>
            </div>
            
            <!-- Users Table -->
            <div class="users-table">
                <table class="table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Status</th>
                            <th>Role</th>
                            <th>Joined</th>
                            <th>Last Login</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Users will be loaded here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Pagination -->
            <div class="pagination">
                <button class="page-link" onclick="changePage('prev')">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <span id="pageInfo">Page 1 of 1</span>
                <button class="page-link" onclick="changePage('next')">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Create User Modal -->
    <div id="createUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create New User</h5>
                <button class="close-btn" onclick="closeModal('createUserModal')">&times;</button>
            </div>
            <form id="createUserForm">
                <div class="form-group">
                    <label class="form-label">Username *</label>
                    <input type="text" class="form-control" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="email" name="email">
                </div>
                <div class="form-group">
                    <label class="form-label">First Name</label>
                    <input type="text" class="form-control" id="firstName" name="firstName">
                </div>
                <div class="form-group">
                    <label class="form-label">Last Name</label>
                    <input type="text" class="form-control" id="lastName" name="lastName">
                </div>
                <div class="form-group">
                    <label class="form-label">Password *</label>
                    <input type="password" class="form-control" id="password" name="password" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Confirm Password *</label>
                    <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required>
                </div>
                <div class="form-group">
                    <label class="form-label">User Role</label>
                    <select class="form-select" id="userRole" name="userRole">
                        <option value="user">Regular User</option>
                        <option value="staff">Staff Member</option>
                        <option value="admin">Administrator</option>
                    </select>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="isActive" name="isActive" checked>
                    <label class="form-check-label" for="isActive">Active User</label>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-outline-secondary" onclick="closeModal('createUserModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create User</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Edit User Modal -->
    <div id="editUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit User</h5>
                <button class="close-btn" onclick="closeModal('editUserModal')">&times;</button>
            </div>
            <form id="editUserForm">
                <input type="hidden" id="editUserId" name="userId">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-control" id="editUsername" name="username" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="editEmail" name="email">
                </div>
                <div class="form-group">
                    <label class="form-label">First Name</label>
                    <input type="text" class="form-control" id="editFirstName" name="firstName">
                </div>
                <div class="form-group">
                    <label class="form-label">Last Name</label>
                    <input type="text" class="form-control" id="editLastName" name="lastName">
                </div>
                <div class="form-group">
                    <label class="form-label">User Role</label>
                    <select class="form-select" id="editUserRole" name="userRole">
                        <option value="user">Regular User</option>
                        <option value="staff">Staff Member</option>
                        <option value="admin">Administrator</option>
                    </select>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="editIsActive" name="isActive">
                    <label class="form-check-label" for="editIsActive">Active User</label>
                </div>
                <div class="btn-group">
                    <button type="button" class="btn btn-outline-secondary" onclick="closeModal('editUserModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Update User</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // Sample user data
        const users = [
            {
                id: 1,
                username: 'admin',
                email: 'admin@zabu.com',
                firstName: 'Admin',
                lastName: 'User',
                isActive: true,
                isStaff: true,
                isAdmin: true,
                dateJoined: '2026-01-06',
                lastLogin: '2026-01-12 18:30',
                avatar: 'A'
            },
            {
                id: 2,
                username: 'testuser',
                email: 'test@zabu.com',
                firstName: 'Test',
                lastName: 'User',
                isActive: true,
                isStaff: true,
                isAdmin: false,
                dateJoined: '2026-01-07',
                lastLogin: '2026-01-12 15:45',
                avatar: 'T'
            },
            {
                id: 3,
                username: 'chef_john',
                email: 'john@zabu.com',
                firstName: 'John',
                lastName: 'Doe',
                isActive: true,
                isStaff: true,
                isAdmin: false,
                dateJoined: '2026-01-08',
                lastLogin: '2026-01-12 14:20',
                avatar: 'J'
            },
            {
                id: 4,
                username: 'customer1',
                email: 'customer1@zabu.com',
                firstName: 'Customer',
                lastName: 'One',
                isActive: true,
                isStaff: false,
                isAdmin: false,
                dateJoined: '2026-01-09',
                lastLogin: '2026-01-11 16:30',
                avatar: 'C'
            },
            {
                id: 5,
                username: 'customer2',
                email: 'customer2@zabu.com',
                firstName: 'Customer',
                lastName: 'Two',
                isActive: false,
                isStaff: false,
                isAdmin: false,
                dateJoined: '2026-01-10',
                lastLogin: '2026-01-10 12:00',
                avatar: 'C'
            }
        ];
        
        let currentPage = 1;
        let usersPerPage = 10;
        let filteredUsers = [...users];
        let currentFilter = 'all';
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            displayUsers();
        });
        
        function displayUsers() {
            const tbody = document.getElementById('usersTableBody');
            tbody.innerHTML = '';
            
            const startIndex = (currentPage - 1) * usersPerPage;
            const endIndex = startIndex + usersPerPage;
            const usersToShow = filteredUsers.slice(startIndex, endIndex);
            
            usersToShow.forEach(user => {
                const row = createUserRow(user);
                tbody.appendChild(row);
            });
            
            updatePagination();
        }
        
        function createUserRow(user) {
            const row = document.createElement('tr');
            
            // User info
            const userCell = document.createElement('td');
            const userInfo = document.createElement('div');
            userInfo.className = 'user-info';
            
            const avatar = document.createElement('div');
            avatar.className = 'user-avatar';
            avatar.textContent = user.firstName.charAt(0).toUpperCase();
            
            const userDetails = document.createElement('div');
            userDetails.className = 'user-details';
            
            const userName = document.createElement('div');
            userName.className = 'user-name';
            userName.textContent = `${user.firstName} ${user.lastName}`;
            
            const userEmail = document.createElement('div');
            userEmail.className = 'user-email';
            userEmail.textContent = user.email;
            
            userDetails.appendChild(userName);
            userDetails.appendChild(userEmail);
            userInfo.appendChild(avatar);
            userInfo.appendChild(userDetails);
            userCell.appendChild(userInfo);
            
            // Status
            const statusCell = document.createElement('td');
            const statusBadge = document.createElement('span');
            statusBadge.className = user.isActive ? 'badge badge-success' : 'badge badge-danger';
            statusBadge.textContent = user.isActive ? 'Active' : 'Inactive';
            statusCell.appendChild(statusBadge);
            
            // Role
            const roleCell = document.createElement('td');
            const roleBadge = document.createElement('span');
            if (user.isAdmin) {
                roleBadge.className = 'badge badge-danger';
                roleBadge.textContent = 'Admin';
            } else if (user.isStaff) {
                roleBadge.className = 'badge badge-warning';
                roleBadge.textContent = 'Staff';
            } else {
                roleBadge.className = 'badge badge-secondary';
                roleBadge.textContent = 'User';
            }
            roleCell.appendChild(roleBadge);
            
            // Joined Date
            const joinedCell = document.createElement('td');
            joinedCell.textContent = user.dateJoined;
            
            // Last Login
            const lastLoginCell = document.createElement('td');
            lastLoginCell.textContent = user.lastLogin;
            
            // Actions
            const actionsCell = document.createElement('td');
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'action-buttons';
            
            const viewBtn = document.createElement('button');
            viewBtn.className = 'btn btn-sm btn-info';
            viewBtn.innerHTML = '<i class="fas fa-eye"></i>';
            viewBtn.onclick = () => viewUser(user.id);
            
            const editBtn = document.createElement('button');
            editBtn.className = 'btn btn-sm btn-primary';
            editBtn.innerHTML = '<i class="fas fa-edit"></i>';
            editBtn.onclick = () => editUser(user.id);
            
            const passwordBtn = document.createElement('button');
            passwordBtn.className = 'btn btn-sm btn-warning';
            passwordBtn.innerHTML = '<i class="fas fa-key"></i>';
            passwordBtn.onclick = () => changePassword(user.id);
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'btn btn-sm btn-danger';
            deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
            deleteBtn.onclick = () => deleteUser(user.id);
            
            actionsDiv.appendChild(viewBtn);
            actionsDiv.appendChild(editBtn);
            actionsDiv.appendChild(passwordBtn);
            if (!user.isAdmin) {
                actionsDiv.appendChild(deleteBtn);
            }
            actionsCell.appendChild(actionsDiv);
            
            row.appendChild(userCell);
            row.appendChild(statusCell);
            row.appendChild(roleCell);
            row.appendChild(joinedCell);
            row.appendChild(lastLoginCell);
            row.appendChild(actionsCell);
            
            return row;
        }
        
        function searchUsers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (searchTerm === '') {
                filteredUsers = [...users];
            } else {
                filteredUsers = users.filter(user => 
                    user.username.toLowerCase().includes(searchTerm) ||
                    user.email.toLowerCase().includes(searchTerm) ||
                    user.firstName.toLowerCase().includes(searchTerm) ||
                    user.lastName.toLowerCase().includes(searchTerm)
                );
            }
            
            currentPage = 1;
            displayUsers();
        }
        
        function filterUsers(filter) {
            currentFilter = filter;
            
            switch(filter) {
                case 'all':
                    filteredUsers = [...users];
                    break;
                case 'active':
                    filteredUsers = users.filter(user => user.isActive);
                    break;
                case 'inactive':
                    filteredUsers = users.filter(user => !user.isActive);
                    break;
                case 'staff':
                    filteredUsers = users.filter(user => user.isStaff);
                    break;
                case 'admin':
                    filteredUsers = users.filter(user => user.isAdmin);
                    break;
            }
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.toLowerCase().includes(filter)) {
                    btn.classList.add('active');
                }
            });
            
            currentPage = 1;
            displayUsers();
        }
        
        function changePage(direction) {
            const totalPages = Math.ceil(filteredUsers.length / usersPerPage);
            
            if (direction === 'prev' && currentPage > 1) {
                currentPage--;
            } else if (direction === 'next' && currentPage < totalPages) {
                currentPage++;
            }
            
            displayUsers();
        }
        
        function updatePagination() {
            const totalPages = Math.ceil(filteredUsers.length / usersPerPage);
            const pageInfo = document.getElementById('pageInfo');
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
        }
        
        function viewUser(userId) {
            const user = users.find(u => u.id === userId);
            alert(`User Details:\n\nName: ${user.firstName} ${user.lastName}\nEmail: ${user.email}\nUsername: ${user.username}\nRole: ${user.isAdmin ? 'Admin' : user.isStaff ? 'Staff' : 'User'}\nStatus: ${user.isActive ? 'Active' : 'Inactive'}\nJoined: ${user.dateJoined}\nLast Login: ${user.lastLogin}`);
        }
        
        function editUser(userId) {
            const user = users.find(u => u.id === userId);
            
            // Populate edit form
            document.getElementById('editUserId').value = user.id;
            document.getElementById('editUsername').value = user.username;
            document.getElementById('editEmail').value = user.email;
            document.getElementById('editFirstName').value = user.firstName;
            document.getElementById('editLastName').value = user.lastName;
            document.getElementById('editUserRole').value = user.isAdmin ? 'admin' : user.isStaff ? 'staff' : 'user';
            document.getElementById('editIsActive').checked = user.isActive;
            
            // Show modal
            document.getElementById('editUserModal').style.display = 'flex';
        }
        
        function changePassword(userId) {
            const user = users.find(u => u.id === userId);
            const newPassword = prompt(`Enter new password for ${user.firstName} ${user.lastName}:`);
            
            if (newPassword && newPassword.length >= 8) {
                // In a real application, this would make an API call
                alert(`Password changed for ${user.firstName} ${user.lastName}\nNew password: ${newPassword}`);
            } else if (newPassword) {
                alert('Password must be at least 8 characters long.');
            }
        }
        
        function deleteUser(userId) {
            const user = users.find(u => u.id === userId);
            
            if (confirm(`Are you sure you want to delete ${user.firstName} ${user.lastName}? This action cannot be undone.`)) {
                // In a real application, this would make an API call
                const index = users.findIndex(u => u.id === userId);
                users.splice(index, 1);
                
                // Update filtered users
                filteredUsers = [...users];
                filterUsers(currentFilter);
                
                alert(`${user.firstName} ${user.lastName} has been deleted.`);
            }
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Handle form submissions
        document.getElementById('createUserForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const password = formData.get('password');
            const confirmPassword = formData.get('confirmPassword');
            
            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }
            
            if (password.length < 8) {
                alert('Password must be at least 8 characters long!');
                return;
            }
            
            // In a real application, this would make an API call
            const newUser = {
                id: Math.max(...users.map(u => u.id)) + 1,
                username: formData.get('username'),
                email: formData.get('email'),
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                isActive: formData.get('isActive') === 'on',
                isStaff: formData.get('userRole') === 'staff',
                isAdmin: formData.get('userRole') === 'admin',
                dateJoined: new Date().toISOString().split('T')[0],
                lastLogin: new Date().toISOString().split('T')[0],
                avatar: formData.get('firstName').charAt(0).toUpperCase()
            };
            
            users.push(newUser);
            filteredUsers = [...users];
            filterUsers(currentFilter);
            
            closeModal('createUserModal');
            document.getElementById('createUserForm').reset();
            
            alert(`User ${newUser.firstName} ${newUser.lastName} has been created successfully!`);
        });
        
        document.getElementById('editUserForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const userId = parseInt(formData.get('userId'));
            
            const userIndex = users.findIndex(u => u.id === userId);
            if (userIndex === -1) return;
            
            users[userIndex].email = formData.get('email');
            users[userIndex].firstName = formData.get('firstName');
            users[userIndex].lastName = formData.get('lastName');
            users[userIndex].isActive = formData.get('isActive') === 'on';
            users[userIndex].isStaff = formData.get('userRole') === 'staff';
            users[userIndex].isAdmin = formData.get('userRole') === 'admin';
            
            filteredUsers = [...users];
            filterUsers(currentFilter);
            
            closeModal('editUserModal');
            
            alert(`User ${users[userIndex].firstName} ${users[userIndex].lastName} has been updated successfully!`);
        });
        
        // Search functionality
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchUsers();
            }
        });
    </script>
</body>
</html>
